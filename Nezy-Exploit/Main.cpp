#include <iostream>
#include <Windows.h>
#include <string>
#include <thread>
#include <vector>

#include "Execution.hpp"


void main()
{
	std::thread(Bypass::bypass_thread).detach();
	Hooks::messagebox_hook();

	uintptr_t roblox_state = LuaState::get_robloxstate();
	exthread = IDA::r_lua_newthread(roblox_state);
	Lua::setlevel(exthread, 8);

	Execution::run_script(exthread, "print('nezy-exploit loaded!')");

	std::thread(Execution::pipe).detach();
}


int __stdcall DllMain(void* Module, DWORD Reason, void* Reserve)
{
	if (Reason == 1)
	{
		std::thread(main).detach();
	}
	return true;
}